(this["webpackJsonpcrm-adverthia"]=this["webpackJsonpcrm-adverthia"]||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(32),c=n.n(a),s=(n(82),n.p,n(83),n(84),n(15)),i=(n(88),{SET_CURRENT_USER:"SET_CURRENT_USER",GOOGLE_SIGN_IN_START:"GOOGLE_SIGN_IN_START",SIGN_IN_SUCCESS:"SIGN_IN_SUCCESS",SIGN_IN_FAILURE:"SIGN_IN_FAILURE",CHECK_USER_SESSION:"CHECK_USER_SESSION",SIGN_OUT_START:"SIGN_OUT_START",SIGN_OUT_SUCCESS:"SIGN_OUT_SUCCESS",SIGN_OUT_FAILURE:"SIGN_OUT_FAILURE",SIGN_UP_START:"SIGN_UP_START",SIGN_UP_SUCCESS:"SIGN_UP_SUCCESS",SIGN_UP_FAILURE:"SIGN_UP_FAILURE"}),o=function(e){return{type:i.SIGN_IN_FAILURE,payload:e}},u=n.p+"static/media/google-logo.edd4e317.png",d=n(3),l=Object(s.b)(null,(function(e){return{googleSignInStart:function(){return e({type:i.GOOGLE_SIGN_IN_START})}}}))((function(e){var t=e.googleSignInStart;return Object(d.jsx)("div",{className:"sign-in-form",children:Object(d.jsxs)("button",{className:"google-sign-in",onClick:t,children:[Object(d.jsx)("img",{src:u,alt:"google-logo"}),Object(d.jsx)("p",{children:"Iniciar Sesi\xf3n con Google"})]})})})),b=function(){return Object(d.jsx)("div",{className:"sign-in-page",children:Object(d.jsx)(l,{})})},j=(n(90),n(13)),f=Object(j.a)([function(e){return e.user}],(function(e){return e.currentUser})),p=(n(91),n(92),n(12)),O=n(29),S=function(e){var t=e.children,n=Object(p.g)().pathname;return Object(d.jsx)(O.b,{className:"data-source-item ".concat(t.toLowerCase()===n.slice(1)?"selected":""),to:"/".concat(t.toLowerCase()),children:t})},h=function(){return Object(d.jsxs)("div",{className:"data-sources-list",children:[Object(d.jsx)(S,{children:"Candidatos"}),Object(d.jsx)(S,{children:"Oportunidades"}),Object(d.jsx)(S,{children:"Clientes"})]})},x=Object(j.b)({currentUser:f}),_=Object(s.b)(x,(function(e){return{signOutStart:function(){return e({type:i.SIGN_OUT_START})}}}))((function(e){var t=e.currentUser,n=e.signOutStart,r=t.displayName;return Object(d.jsxs)("div",{className:"sidebar",children:[Object(d.jsxs)("div",{className:"sidebar-header",children:[Object(d.jsxs)("h3",{children:["Hola, ",r.split(" ")[0]]}),Object(d.jsx)("button",{className:"sign-out-button",onClick:n,children:"Salir"})]}),Object(d.jsx)(h,{})]})})),m=(n(94),n(38)),E=n(39),v=function(){return Object(d.jsx)("div",{className:"default-page",children:Object(d.jsx)(m.a,{className:"search-icon",icon:E.b})})},g=(n(97),{FETCH_LEADS_START:"FETCH_LEADS_START",FETCH_LEADS_SUCCESS:"FETCH_LEADS_SUCCESS",FETCH_LEADS_FAILURE:"FETCH_LEADS_SUCCESS",CHANGE_STAGE_START:"CHANGE_STAGE_START",CHANGE_STAGE_SUCCESS:"CHANGE_STAGE_SUCCESS",CHANGE_STAGE_FAILURE:"CHANGE_STAGE_FAILURE"}),N=function(){return{type:g.FETCH_LEADS_START}},C=n(7),T=n.n(C),A=n(18),w=n(65),I=n(31),U=(n(133),n(99),n(66)),G=n(40),y=n(67),k=n(76),R=n(77),L=function(e){Object(y.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Error.captureStackTrace&&Error.captureStackTrace(Object(G.a)(e),n),e.name="EmailDomainError",e.date=new Date,e}return n}(Object(R.a)(Error)),F=function(){var e=Object(w.a)(T.a.mark((function e(t,n){var r,a,c,s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=D.doc("users/".concat(t.uid)),e.next=5,r.get();case 5:if(e.sent.exists){e.next=19;break}if(a=t.displayName,c=t.email,s=new Date,"adverthia.com"===c.split("@")[1]){e.next=11;break}throw new L("Email domain is not valid. Your email must belong to Adverthia Digital Marketing.");case 11:return e.prev=11,e.next=14,r.set(Object(A.a)({displayName:a,email:c,createdAt:s},n));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(11),console.log("error creating user",e.t0.message);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,null,[[11,16]])})));return function(t,n){return e.apply(this,arguments)}}();I.a.initializeApp({apiKey:"AIzaSyDqBVltCqmubBEMyQz2IJAebKyl_hFrlRA",authDomain:"crm-adverthia.firebaseapp.com",projectId:"crm-adverthia",storageBucket:"crm-adverthia.appspot.com",messagingSenderId:"969091238454",appId:"1:969091238454:web:0177808a8c8408271be697"});var H=I.a.auth(),D=I.a.firestore(),P=new I.a.auth.GoogleAuthProvider;P.setCustomParameters({prompt:"select_account"});I.a;var B,K,M=function(e){return e.lead},z=Object(j.a)([M],(function(e){return e.leads})),J=(Object(j.a)([M],(function(e){return e.isFetching})),Object(j.a)([z],(function(e){return e?e.filter((function(e){return"candidato"===e.stage})):null}))),q=Object(j.a)([z],(function(e){return e?e.filter((function(e){return"cliente"===e.stage})):null})),V=Object(j.a)([z],(function(e){return e?e.filter((function(e){return"oportunidad"===e.stage})):null})),Q=(n(101),n(102),[{field:"email",headerName:"Correo electr\xf3nico",width:"200px"},{field:"name",headerName:"Nombre",width:"100px"},{field:"last_name",headerName:"Apellidos",width:"200px"},{field:"phone",headerName:"Tel\xe9fono",width:"100px"},{field:"city",headerName:"Ciudad",width:"150px"},{field:"country",headerName:"Pa\xeds",width:"80px"},{field:"service",headerName:"Servicio",width:"150px"},{field:"stage",headerName:"Estado",width:"80px"}]),W=function(){return Object(d.jsx)("thead",{children:Object(d.jsx)("tr",{children:Q.map((function(e,t){return Object(d.jsx)("th",{className:"table-header-item ".concat(t!==Q.length-1?"border-right":""),style:{width:e.width},children:e.headerName},t)}))})})},Y=(n(103),n(104),n(105),Object(s.b)(null,(function(e){return{changeStageStart:function(t){return e(function(e){return{type:g.CHANGE_STAGE_START,payload:e}}(t))}}}))((function(e){var t=e.id,n=e.stage,r=e.changeStageStart,a=e.index;return Object(d.jsxs)("select",{className:"stage-field",style:{background:"".concat(a%2?"#25273a":"#1d1f2e")},onChange:function(e){var n=e.target.value;r({id:t,stage:n})},name:"stage",value:n.toLowerCase(),children:[Object(d.jsx)("option",{className:"stage-field-option",value:"candidato",children:"Candidato"}),Object(d.jsx)("option",{className:"stage-field-option",value:"oportunidad",children:"Oportunidad"}),Object(d.jsx)("option",{className:"stage-field-option",value:"cliente",children:"Cliente"})]})}))),X=function(e){var t=e.dataRow,n=e.index;return Object(d.jsx)("tr",{className:"table-row ".concat(n%2?"":"dark"),children:Q.map((function(e,r){return"stage"===e.field?Object(d.jsx)("td",{className:"table-row-item",children:Object(d.jsx)(Y,{index:n,id:t.id,stage:t.stage})}):Object(d.jsx)("td",{className:"table-row-item border-right",children:t[e.field]},r)}))})},Z=function(e){var t=e.data;return Object(d.jsx)("tbody",{children:t.map((function(e,t){return Object(d.jsx)(X,{index:t,dataRow:e})}))})},$=(n(106),function(){return Object(d.jsx)("div",{className:"empty-leads-page",children:Object(d.jsxs)("div",{className:"icon-text-container",children:[Object(d.jsx)(m.a,{className:"empty-folder-icon",icon:E.a}),Object(d.jsxs)("h2",{children:["Todav\xeda no hay ",window.location.pathname.slice(1)]})]})})}),ee=n(47),te=n(48),ne=te.a.div(B||(B=Object(ee.a)(["\n  height: 60vh;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),re=te.a.div(K||(K=Object(ee.a)(["\n  display: inline-block;\n  width: 50px;\n  height: 50px;\n  border: 3px solid rgba(195, 195, 195, 0.6);\n  border-radius: 50%;\n  border-top-color: #636767;\n  animation: spin 1s ease-in-out infinite;\n  -webkit-animation: spin 1s ease-in-out infinite;\n  @keyframes spin {\n    to {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n  @-webkit-keyframes spin {\n    to {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n"]))),ae=function(e){var t=e.data;return console.log(t),t?t.isAxiosError?Object(d.jsx)("h1",{children:"Error al conectar con el servidor"}):t.length>0?Object(d.jsxs)("table",{className:"table-container",children:[Object(d.jsx)(W,{}),Object(d.jsx)(Z,{data:t})]}):Object(d.jsx)($,{}):Object(d.jsx)(ne,{children:Object(d.jsx)(re,{})})},ce=Object(j.b)({leads:z}),se=(Object(s.b)(ce,(function(e){return{fetchLeadsStart:function(){return e(N())}}}))((function(e){var t=e.fetchLeadsStart,n=e.leads;e.location;return Object(r.useEffect)((function(){return t()}),[t]),Object(d.jsxs)("div",{className:"leads",children:[Object(d.jsx)("h1",{children:"OPORTUNIDADES"}),Object(d.jsx)(ae,{data:n})]})})),n(107),Object(j.b)({leads:V})),ie=Object(s.b)(se,(function(e){return{fetchLeadsStart:function(){return e(N())}}}))((function(e){var t=e.fetchLeadsStart,n=e.leads;return Object(r.useEffect)((function(){return t()}),[t]),Object(d.jsxs)("div",{className:"chances-page",children:[Object(d.jsx)("h1",{children:"Oportunidades"}),Object(d.jsx)(ae,{data:n})]})})),oe=(n(108),Object(j.b)({leads:J})),ue=Object(s.b)(oe,(function(e){return{fetchLeadsStart:function(){return e(N())}}}))((function(e){var t=e.fetchLeadsStart,n=e.leads;return Object(r.useEffect)((function(){return t()}),[t]),Object(d.jsxs)("div",{className:"candidates-page",children:[Object(d.jsx)("h1",{children:"Candidatos"}),Object(d.jsx)(ae,{data:n})]})})),de=(n(109),Object(j.b)({leads:q})),le=Object(s.b)(de,(function(e){return{fetchLeadsStart:function(){return e(N())}}}))((function(e){var t=e.fetchLeadsStart,n=e.leads;return Object(r.useEffect)((function(){return t()}),[t]),Object(d.jsxs)("div",{className:"customers-page",children:[Object(d.jsx)("h1",{children:"Clientes"}),Object(d.jsx)(ae,{data:n})]})})),be=Object(j.b)({currentUser:f}),je=Object(s.b)(be,(function(e){return{checkUserSession:function(){return e({type:i.CHECK_USER_SESSION})}}}))((function(e){var t=e.currentUser,n=e.checkUserSession;return Object(r.useEffect)((function(){return n()}),[]),t?Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(_,{}),Object(d.jsxs)(p.d,{children:[Object(d.jsx)(p.b,{exact:!0,path:"/",component:t?v:null}),Object(d.jsx)(p.b,{exact:!0,path:"/candidatos",component:t?ue:null}),Object(d.jsx)(p.b,{exact:!0,path:"/oportunidades",component:t?ie:null}),Object(d.jsx)(p.b,{exact:!0,path:"/clientes",component:t?le:null}),Object(d.jsx)(p.a,{from:"/sign-in",to:"/"})]})]}):Object(d.jsxs)(p.d,{children:[Object(d.jsx)(p.b,{path:"/sign-in",component:b}),Object(d.jsx)(p.a,{to:"/sign-in"})]})})),fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,134)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},pe=n(27),Oe={leads:null,isFetching:!1,errorMessage:void 0},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.FETCH_LEADS_SUCCESS:return Object(A.a)(Object(A.a)({},e),{},{isFetching:!1,leads:t.payload});case g.FETCH_LEADS_START:return Object(A.a)(Object(A.a)({},e),{},{isFetching:!0});case g.FETCH_LEADS_FAILURE:return Object(A.a)(Object(A.a)({},e),{},{isFetching:!1,errorMessage:t.payload.message});default:return e}},he={currentUser:null},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.SIGN_IN_SUCCESS:return Object(A.a)(Object(A.a)({},e),{},{currentUser:t.payload,error:null});case i.SIGN_OUT_SUCCESS:return Object(A.a)(Object(A.a)({},e),{},{currentUser:null,error:null});default:return e}},_e=Object(pe.b)({lead:Se,user:xe}),me=n(71),Ee=n.n(me),ve=n(75),ge=n(11),Ne=n(72),Ce=n.n(Ne),Te=n(73),Ae=n.n(Te),we=T.a.mark(De),Ie=T.a.mark(Pe),Ue=T.a.mark(Be),Ge=T.a.mark(Ke),ye=T.a.mark(Me),ke=T.a.mark(ze),Re=T.a.mark(Je),Le=T.a.mark(qe),Fe=T.a.mark(Ve),He=T.a.mark(Qe);function De(e,t){var n,r;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ge.b)(F,e,t);case 3:return n=a.sent,a.next=6,n.get();case 6:return r=a.sent,a.next=9,Object(ge.c)((c=Object(A.a)({id:r.id},r.data()),{type:i.SIGN_IN_SUCCESS,payload:c}));case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(ge.c)(o(a.t0));case 15:case"end":return a.stop()}var c}),we,null,[[0,11]])}function Pe(){var e,t;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,H.signInWithPopup(P);case 3:return e=n.sent,t=e.user,n.next=7,De(t);case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,Object(ge.c)(o(n.t0));case 13:case"end":return n.stop()}}),Ie,null,[[0,9]])}function Be(e){var t;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e;case 2:t=n.sent,t.type,"EmailDomainError"===t.payload.name&&Ae()(Ce.a).fire({title:"Email no v\xe1lido",text:"Debe pertenecer a Adverthia Digital Marketing para acceder al CRM.",icon:"error",confirmButtonText:"Vale"});case 6:case"end":return n.stop()}}),Ue)}function Ke(){var e;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,H.currentUser;case 3:if(e=t.sent,console.log(e),e){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,De(e);case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(0),t.next=15,Object(ge.c)(o(t.t0));case 15:case"end":return t.stop()}}),Ge,null,[[0,11]])}function Me(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.signOut();case 3:return e.next=5,Object(ge.c)({type:i.SIGN_OUT_SUCCESS});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(ge.c)((t=e.t0,{type:i.SIGN_OUT_FAILURE,payload:t}));case 11:case"end":return e.stop()}var t}),ye,null,[[0,7]])}function ze(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.d)(i.GOOGLE_SIGN_IN_START,Pe);case 2:case"end":return e.stop()}}),ke)}function Je(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.d)(i.SIGN_IN_FAILURE,Be);case 2:case"end":return e.stop()}}),Re)}function qe(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.d)(i.SIGN_OUT_START,Me);case 2:case"end":return e.stop()}}),Le)}function Ve(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.d)(i.CHECK_USER_SESSION,Ke);case 2:case"end":return e.stop()}}),Fe)}function Qe(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.a)([Object(ge.b)(ze),Object(ge.b)(Je),Object(ge.b)(Ve),Object(ge.b)(qe)]);case 2:case"end":return e.stop()}}),He)}var We=n(74),Ye=n.n(We).a.create({baseURL:"http://34.231.255.94"}),Xe=T.a.mark(at),Ze=T.a.mark(ct),$e=T.a.mark(st),et=T.a.mark(it),tt=T.a.mark(ot),nt=T.a.mark(ut),rt=T.a.mark(dt);function at(){var e,t;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ye.get("/leads");case 3:if(e=n.sent,t=e.data,200!==e.status){n.next=8;break}return n.next=8,Object(ge.c)({type:g.FETCH_LEADS_SUCCESS,payload:t});case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(ge.c)((r=n.t0,{type:g.FETCH_LEADS_FAILURE,payload:r}));case 14:case"end":return n.stop()}var r}),Xe,null,[[0,10]])}function ct(e){var t,n,r;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.id,r=t.stage,a.prev=1,a.next=4,Ye.post("/change-lead-stage",{id:n,stage:r});case 4:if(200!==a.sent.status){a.next=8;break}return a.next=8,Object(ge.c)({type:g.CHANGE_STAGE_SUCCESS});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(1),a.next=14,Object(ge.c)((c=a.t0,{type:g.CHANGE_STAGE_FAILURE,payload:c.message}));case 14:case"end":return a.stop()}var c}),Ze,null,[[1,10]])}function st(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.c)(N());case 2:case"end":return e.stop()}}),$e)}function it(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.d)(g.FETCH_LEADS_START,at);case 2:case"end":return e.stop()}}),et)}function ot(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.d)(g.CHANGE_STAGE_START,ct);case 2:case"end":return e.stop()}}),tt)}function ut(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.d)(g.CHANGE_STAGE_SUCCESS,st);case 2:case"end":return e.stop()}}),nt)}function dt(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.a)([Object(ge.b)(it),Object(ge.b)(ot),Object(ge.b)(ut)]);case 2:case"end":return e.stop()}}),rt)}var lt=T.a.mark(bt);function bt(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.a)([Object(ge.b)(Qe),Object(ge.b)(dt)]);case 2:case"end":return e.stop()}}),lt)}var jt=Object(ve.a)(),ft=[Ee.a,jt],pt=Object(pe.d)(_e,pe.a.apply(void 0,ft));jt.run(bt),c.a.render(Object(d.jsx)(s.a,{store:pt,children:Object(d.jsx)(O.a,{children:Object(d.jsx)(je,{})})}),document.getElementById("root")),fe()},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},88:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},94:function(e,t,n){},97:function(e,t,n){}},[[132,1,2]]]);
//# sourceMappingURL=main.7e758bfb.chunk.js.map