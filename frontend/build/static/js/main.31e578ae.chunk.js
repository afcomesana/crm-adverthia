(this["webpackJsonpcrm-adverthia"]=this["webpackJsonpcrm-adverthia"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(30),c=n.n(a),s=(n(76),n.p,n(77),n(78),n(15)),i=(n(82),{SET_CURRENT_USER:"SET_CURRENT_USER",GOOGLE_SIGN_IN_START:"GOOGLE_SIGN_IN_START",SIGN_IN_SUCCESS:"SIGN_IN_SUCCESS",SIGN_IN_FAILURE:"SIGN_IN_FAILURE",CHECK_USER_SESSION:"CHECK_USER_SESSION",SIGN_OUT_START:"SIGN_OUT_START",SIGN_OUT_SUCCESS:"SIGN_OUT_SUCCESS",SIGN_OUT_FAILURE:"SIGN_OUT_FAILURE",SIGN_UP_START:"SIGN_UP_START",SIGN_UP_SUCCESS:"SIGN_UP_SUCCESS",SIGN_UP_FAILURE:"SIGN_UP_FAILURE"}),o=function(e){return{type:i.SIGN_IN_FAILURE,payload:e}},u=n.p+"static/media/google-logo.edd4e317.png",d=n(3),l=Object(s.b)(null,(function(e){return{googleSignInStart:function(){return e({type:i.GOOGLE_SIGN_IN_START})}}}))((function(e){var t=e.googleSignInStart;return Object(d.jsx)("div",{className:"sign-in-form",children:Object(d.jsxs)("button",{className:"google-sign-in",onClick:t,children:[Object(d.jsx)("img",{src:u,alt:"google-logo"}),Object(d.jsx)("p",{children:"Iniciar Sesi\xf3n con Google"})]})})})),b=function(){return Object(d.jsx)("div",{className:"sign-in-page",children:Object(d.jsx)(l,{})})},j=(n(84),n(13)),f=Object(j.a)([function(e){return e.user}],(function(e){return e.currentUser})),p=(n(85),n(86),n(12)),S=n(27),O=function(e){var t=e.children,n=Object(p.g)().pathname;return Object(d.jsx)(S.b,{className:"data-source-item ".concat(t.toLowerCase()===n.slice(1)?"selected":""),to:"/".concat(t.toLowerCase()),children:t})},h=function(){return Object(d.jsxs)("div",{className:"data-sources-list",children:[Object(d.jsx)(O,{children:"Candidatos"}),Object(d.jsx)(O,{children:"Oportunidades"}),Object(d.jsx)(O,{children:"Clientes"})]})},x=Object(j.b)({currentUser:f}),_=Object(s.b)(x,(function(e){return{signOutStart:function(){return e({type:i.SIGN_OUT_START})}}}))((function(e){var t=e.currentUser,n=e.signOutStart,r=t.displayName;return Object(d.jsxs)("div",{className:"sidebar",children:[Object(d.jsxs)("div",{className:"sidebar-header",children:[Object(d.jsxs)("h3",{children:["Hola, ",r.split(" ")[0]]}),Object(d.jsx)("button",{className:"sign-out-button",onClick:n,children:"Salir"})]}),Object(d.jsx)(h,{})]})})),E=(n(88),n(37)),m=n(38),v=function(){return Object(d.jsx)("div",{className:"default-page",children:Object(d.jsx)(E.a,{className:"search-icon",icon:m.b})})},g=(n(91),{FETCH_LEADS_START:"FETCH_LEADS_START",FETCH_LEADS_SUCCESS:"FETCH_LEADS_SUCCESS",FETCH_LEADS_FAILURE:"FETCH_LEADS_SUCCESS",CHANGE_STAGE_START:"CHANGE_STAGE_START",CHANGE_STAGE_SUCCESS:"CHANGE_STAGE_SUCCESS",CHANGE_STAGE_FAILURE:"CHANGE_STAGE_FAILURE"}),N=function(){return{type:g.FETCH_LEADS_START}},C=n(7),T=n.n(C),A=n(18),I=n(62),U=n(29),w=(n(127),n(93),n(63)),G=n(39),R=n(64),y=n(70),L=n(71),k=function(e){Object(R.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(w.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Error.captureStackTrace&&Error.captureStackTrace(Object(G.a)(e),n),e.name="EmailDomainError",e.date=new Date,e}return n}(Object(L.a)(Error)),F=function(){var e=Object(I.a)(T.a.mark((function e(t,n){var r,a,c,s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=D.doc("users/".concat(t.uid)),e.next=5,r.get();case 5:if(e.sent.exists){e.next=19;break}if(a=t.displayName,c=t.email,s=new Date,"adverthia.com"===c.split("@")[1]){e.next=11;break}throw new k("Email domain is not valid. Your email must belong to Adverthia Digital Marketing.");case 11:return e.prev=11,e.next=14,r.set(Object(A.a)({displayName:a,email:c,createdAt:s},n));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(11),console.log("error creating user",e.t0.message);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,null,[[11,16]])})));return function(t,n){return e.apply(this,arguments)}}();U.a.initializeApp({apiKey:"AIzaSyDqBVltCqmubBEMyQz2IJAebKyl_hFrlRA",authDomain:"crm-adverthia.firebaseapp.com",projectId:"crm-adverthia",storageBucket:"crm-adverthia.appspot.com",messagingSenderId:"969091238454",appId:"1:969091238454:web:0177808a8c8408271be697"});var H=U.a.auth(),D=U.a.firestore(),P=new U.a.auth.GoogleAuthProvider;P.setCustomParameters({prompt:"select_account"});U.a;var B=function(e){return e.lead},K=Object(j.a)([B],(function(e){return e.leads})),M=(Object(j.a)([B],(function(e){return e.isFetching})),Object(j.a)([K],(function(e){return e?e.filter((function(e){return"candidato"===e.stage})):null}))),z=Object(j.a)([K],(function(e){return e?e.filter((function(e){return"cliente"===e.stage})):null})),J=Object(j.a)([K],(function(e){return e?e.filter((function(e){return"oportunidad"===e.stage})):null})),q=(n(95),n(96),[{field:"email",headerName:"Correo electr\xf3nico",width:"200px"},{field:"name",headerName:"Nombre",width:"100px"},{field:"last_name",headerName:"Apellidos",width:"200px"},{field:"phone",headerName:"Tel\xe9fono",width:"100px"},{field:"city",headerName:"Ciudad",width:"150px"},{field:"country",headerName:"Pa\xeds",width:"80px"},{field:"service",headerName:"Servicio",width:"150px"},{field:"stage",headerName:"Estado",width:"80px"}]),V=function(){return Object(d.jsx)("thead",{children:Object(d.jsx)("tr",{children:q.map((function(e,t){return Object(d.jsx)("th",{className:"table-header-item ".concat(t!==q.length-1?"border-right":""),style:{width:e.width},children:e.headerName},t)}))})})},Q=(n(97),n(98),n(99),Object(s.b)(null,(function(e){return{changeStageStart:function(t){return e(function(e){return{type:g.CHANGE_STAGE_START,payload:e}}(t))}}}))((function(e){var t=e.id,n=e.stage,r=e.changeStageStart,a=e.index;return Object(d.jsxs)("select",{className:"stage-field",style:{background:"".concat(a%2?"#25273a":"#1d1f2e")},onChange:function(e){var n=e.target.value;r({id:t,stage:n})},name:"stage",value:n.toLowerCase(),children:[Object(d.jsx)("option",{className:"stage-field-option",value:"candidato",children:"Candidato"}),Object(d.jsx)("option",{className:"stage-field-option",value:"oportunidad",children:"Oportunidad"}),Object(d.jsx)("option",{className:"stage-field-option",value:"cliente",children:"Cliente"})]})}))),W=function(e){var t=e.dataRow,n=e.index;return Object(d.jsx)("tr",{className:"table-row ".concat(n%2?"":"dark"),children:q.map((function(e,r){return"stage"===e.field?Object(d.jsx)("td",{className:"table-row-item",children:Object(d.jsx)(Q,{index:n,id:t.id,stage:t.stage})}):Object(d.jsx)("td",{className:"table-row-item border-right",children:t[e.field]},r)}))})},Y=function(e){var t=e.data;return Object(d.jsx)("tbody",{children:t.map((function(e,t){return Object(d.jsx)(W,{index:t,dataRow:e})}))})},X=(n(100),function(){return Object(d.jsx)("div",{className:"empty-leads-page",children:Object(d.jsxs)("div",{className:"icon-text-container",children:[Object(d.jsx)(E.a,{className:"empty-folder-icon",icon:m.a}),Object(d.jsxs)("h2",{children:["Todav\xeda no hay ",window.location.pathname.slice(1)]})]})})}),Z=function(e){var t=e.data;return console.log(t),t?t.isAxiosError?Object(d.jsx)("h1",{children:"Error al conectar con el servidor"}):t.length>0?Object(d.jsxs)("table",{className:"table-container",children:[Object(d.jsx)(V,{}),Object(d.jsx)(Y,{data:t})]}):Object(d.jsx)(X,{}):Object(d.jsx)("h1",{children:"Cargando..."})},$=Object(j.b)({leads:K}),ee=(Object(s.b)($,(function(e){return{fetchLeadsStart:function(){return e(N())}}}))((function(e){var t=e.fetchLeadsStart,n=e.leads;e.location;return Object(r.useEffect)((function(){return t()}),[t]),Object(d.jsxs)("div",{className:"leads",children:[Object(d.jsx)("h1",{children:"OPORTUNIDADES"}),Object(d.jsx)(Z,{data:n})]})})),n(101),Object(j.b)({leads:J})),te=Object(s.b)(ee,(function(e){return{fetchLeadsStart:function(){return e(N())}}}))((function(e){var t=e.fetchLeadsStart,n=e.leads;return Object(r.useEffect)((function(){return t()}),[t]),Object(d.jsxs)("div",{className:"chances-page",children:[Object(d.jsx)("h1",{children:"Oportunidades"}),Object(d.jsx)(Z,{data:n})]})})),ne=(n(102),Object(j.b)({leads:M})),re=Object(s.b)(ne,(function(e){return{fetchLeadsStart:function(){return e(N())}}}))((function(e){var t=e.fetchLeadsStart,n=e.leads;return Object(r.useEffect)((function(){return t()}),[t]),Object(d.jsxs)("div",{className:"candidates-page",children:[Object(d.jsx)("h1",{children:"Candidatos"}),Object(d.jsx)(Z,{data:n})]})})),ae=(n(103),Object(j.b)({leads:z})),ce=Object(s.b)(ae,(function(e){return{fetchLeadsStart:function(){return e(N())}}}))((function(e){var t=e.fetchLeadsStart,n=e.leads;return Object(r.useEffect)((function(){return t()}),[t]),Object(d.jsxs)("div",{className:"customers-page",children:[Object(d.jsx)("h1",{children:"Clientes"}),Object(d.jsx)(Z,{data:n})]})})),se=Object(j.b)({currentUser:f}),ie=Object(s.b)(se,(function(e){return{checkUserSession:function(){return e({type:i.CHECK_USER_SESSION})}}}))((function(e){var t=e.currentUser,n=e.checkUserSession;return Object(r.useEffect)((function(){return n()}),[]),t?Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(_,{}),Object(d.jsxs)(p.d,{children:[Object(d.jsx)(p.b,{exact:!0,path:"/",component:t?v:null}),Object(d.jsx)(p.b,{exact:!0,path:"/candidatos",component:t?re:null}),Object(d.jsx)(p.b,{exact:!0,path:"/oportunidades",component:t?te:null}),Object(d.jsx)(p.b,{exact:!0,path:"/clientes",component:t?ce:null}),Object(d.jsx)(p.a,{from:"/sign-in",to:"/"})]})]}):Object(d.jsxs)(p.d,{children:[Object(d.jsx)(p.b,{path:"/sign-in",component:b}),Object(d.jsx)(p.a,{to:"/sign-in"})]})})),oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,128)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},ue=n(25),de={leads:null,isFetching:!1,errorMessage:void 0},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.FETCH_LEADS_SUCCESS:return Object(A.a)(Object(A.a)({},e),{},{isFetching:!1,leads:t.payload});case g.FETCH_LEADS_START:return Object(A.a)(Object(A.a)({},e),{},{isFetching:!0});case g.FETCH_LEADS_FAILURE:return Object(A.a)(Object(A.a)({},e),{},{isFetching:!1,errorMessage:t.payload.message});default:return e}},be={currentUser:null},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.SIGN_IN_SUCCESS:return Object(A.a)(Object(A.a)({},e),{},{currentUser:t.payload,error:null});case i.SIGN_OUT_SUCCESS:return Object(A.a)(Object(A.a)({},e),{},{currentUser:null,error:null});default:return e}},fe=Object(ue.b)({lead:le,user:je}),pe=n(65),Se=n.n(pe),Oe=n(69),he=n(11),xe=n(66),_e=n.n(xe),Ee=n(67),me=n.n(Ee),ve=T.a.mark(Re),ge=T.a.mark(ye),Ne=T.a.mark(Le),Ce=T.a.mark(ke),Te=T.a.mark(Fe),Ae=T.a.mark(He),Ie=T.a.mark(De),Ue=T.a.mark(Pe),we=T.a.mark(Be),Ge=T.a.mark(Ke);function Re(e,t){var n,r;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(he.b)(F,e,t);case 3:return n=a.sent,a.next=6,n.get();case 6:return r=a.sent,a.next=9,Object(he.c)((c=Object(A.a)({id:r.id},r.data()),{type:i.SIGN_IN_SUCCESS,payload:c}));case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(he.c)(o(a.t0));case 15:case"end":return a.stop()}var c}),ve,null,[[0,11]])}function ye(){var e,t;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,H.signInWithPopup(P);case 3:return e=n.sent,t=e.user,n.next=7,Re(t);case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,Object(he.c)(o(n.t0));case 13:case"end":return n.stop()}}),ge,null,[[0,9]])}function Le(e){var t;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e;case 2:t=n.sent,t.type,"EmailDomainError"===t.payload.name&&me()(_e.a).fire({title:"Email no v\xe1lido",text:"Debe pertenecer a Adverthia Digital Marketing para acceder al CRM.",icon:"error",confirmButtonText:"Vale"});case 6:case"end":return n.stop()}}),Ne)}function ke(){var e;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,H.currentUser;case 3:if(e=t.sent,console.log(e),e){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,Re(e);case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(0),t.next=15,Object(he.c)(o(t.t0));case 15:case"end":return t.stop()}}),Ce,null,[[0,11]])}function Fe(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.signOut();case 3:return e.next=5,Object(he.c)({type:i.SIGN_OUT_SUCCESS});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(he.c)((t=e.t0,{type:i.SIGN_OUT_FAILURE,payload:t}));case 11:case"end":return e.stop()}var t}),Te,null,[[0,7]])}function He(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(i.GOOGLE_SIGN_IN_START,ye);case 2:case"end":return e.stop()}}),Ae)}function De(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(i.SIGN_IN_FAILURE,Le);case 2:case"end":return e.stop()}}),Ie)}function Pe(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(i.SIGN_OUT_START,Fe);case 2:case"end":return e.stop()}}),Ue)}function Be(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(i.CHECK_USER_SESSION,ke);case 2:case"end":return e.stop()}}),we)}function Ke(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.a)([Object(he.b)(He),Object(he.b)(De),Object(he.b)(Be),Object(he.b)(Pe)]);case 2:case"end":return e.stop()}}),Ge)}var Me=n(68),ze=n.n(Me).a.create({baseURL:"http://localhost:5000"}),Je=T.a.mark(Ze),qe=T.a.mark($e),Ve=T.a.mark(et),Qe=T.a.mark(tt),We=T.a.mark(nt),Ye=T.a.mark(rt),Xe=T.a.mark(at);function Ze(){var e,t;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ze.get("/leads");case 3:if(e=n.sent,t=e.data,200!==e.status){n.next=8;break}return n.next=8,Object(he.c)({type:g.FETCH_LEADS_SUCCESS,payload:t});case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(he.c)((r=n.t0,{type:g.FETCH_LEADS_FAILURE,payload:r}));case 14:case"end":return n.stop()}var r}),Je,null,[[0,10]])}function $e(e){var t,n,r;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.id,r=t.stage,a.prev=1,a.next=4,ze.post("/change-lead-stage",{id:n,stage:r});case 4:if(200!==a.sent.status){a.next=8;break}return a.next=8,Object(he.c)({type:g.CHANGE_STAGE_SUCCESS});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(1),a.next=14,Object(he.c)((c=a.t0,{type:g.CHANGE_STAGE_FAILURE,payload:c.message}));case 14:case"end":return a.stop()}var c}),qe,null,[[1,10]])}function et(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.c)(N());case 2:case"end":return e.stop()}}),Ve)}function tt(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(g.FETCH_LEADS_START,Ze);case 2:case"end":return e.stop()}}),Qe)}function nt(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(g.CHANGE_STAGE_START,$e);case 2:case"end":return e.stop()}}),We)}function rt(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(g.CHANGE_STAGE_SUCCESS,et);case 2:case"end":return e.stop()}}),Ye)}function at(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.a)([Object(he.b)(tt),Object(he.b)(nt),Object(he.b)(rt)]);case 2:case"end":return e.stop()}}),Xe)}var ct=T.a.mark(st);function st(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.a)([Object(he.b)(Ke),Object(he.b)(at)]);case 2:case"end":return e.stop()}}),ct)}var it=Object(Oe.a)(),ot=[Se.a,it],ut=Object(ue.d)(fe,ue.a.apply(void 0,ot));it.run(st),c.a.render(Object(d.jsx)(s.a,{store:ut,children:Object(d.jsx)(S.a,{children:Object(d.jsx)(ie,{})})}),document.getElementById("root")),oe()},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},82:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},88:function(e,t,n){},91:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[126,1,2]]]);
//# sourceMappingURL=main.31e578ae.chunk.js.map